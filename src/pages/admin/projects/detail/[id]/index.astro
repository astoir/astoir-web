---
import AdminOnly from "~components/Auth/AdminOnly";
import ProjectDetail from "~layouts/projects/ProjectDetail.astro";
import { getProjects } from "~utils/getProjects";

export async function getStaticPaths() {
  const projects = await getProjects();

  const postResult = projects.map(project => ({
    params: { id: project.id },
    props: { project },
  }));

  return postResult;
}

const { project } = Astro.props;
---

<AdminOnly client:load>
  <ProjectDetail project={project} isAdmin={true} />
</AdminOnly>
