@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ===== Color Theme (CSS Variables) ===== */
  :root,
/* Light Theme */
html[data-theme="light"] {
    --color-fill: 244, 244, 246; /* #F4F4F6: 아주 연한 회색/백색 */
    --color-text-base: 45, 45, 45; /* #2D2D2D: 짙은 회색 */
    --color-text-accent: 29, 29, 31; /* #1D1D1F: 애플스타일 검정색 */
    --color-text-white: 242, 242, 245; /* #F2F2F5: 밝은 회색, 흰색에 가까움 */
    --color-text-white-accent: 245, 245, 247; /* #F5F5F7: 애플스타일 밝은 회색 */
    --color-accent: 91, 95, 176; /* #5B5FB0: 은은한 퍼플블루 */
    --color-background: 255, 255, 255; /* #FFFFFF */
    --color-card: 255, 255, 255; /* #FFFFFF */
    --color-card-muted: 230, 232, 242; /* #E6E8F2: 보랏빛 감도는 옅은 회색 */
    --color-border: 204, 206, 218; /* #CCCEDA: 카드/요소 테두리 */
  }

  /* Dark Theme */
  html[data-theme="dark"] {
    --color-fill: 21, 21, 33; /* #151521: 어두운 남보라톤 밤하늘 느낌 */
    --color-text-base: 242, 242, 245; /* #F2F2F5: 밝은 회색, 흰색에 가까움 */
    --color-text-accent: 245, 245, 247; /* #F5F5F7: 애플스타일 밝은 회색 */
    --color-text-white: 242, 242, 245; /* #F2F2F5: 밝은 회색, 흰색에 가까움 */
    --color-text-white-accent: 245, 245, 247; /* #F5F5F7: 애플스타일 밝은 회색 */
    --color-accent: 124, 124, 191; /* #7C7CBF: 다크 모드에서 조금 더 라이트한 퍼플블루 */
    --color-background: 21, 21, 33; /* #151521: 어두운 남보라톤 밤하늘 느낌 */
    --color-card: 34, 34, 48; /* #222230 */
    --color-card-muted: 46, 46, 68; /* #2E2E44: 살짝 더 옅은 농도 */
    --color-border: 90, 90, 112; /* #5A5A70 */
  }

  /* ===== 다크/라이트 토글 시 아이콘 전환 ===== */
  #sun-svg,
  html[data-theme="dark"] #moon-svg {
    display: none;
  }
  #moon-svg,
  html[data-theme="dark"] #sun-svg {
    display: block;
  }

  /* ===== Global Base 스타일 ===== */
  body {
    @apply min-h-screen bg-skin-background font-sans text-skin-base antialiased;
    /* 반응형은 Tailwind의 유틸 클래스로 충분히 대응 가능 */
  }

  a {
    /* 포커스 스타일, 기본적으로 Tailwind 유틸로 처리 가능하나 예시로 작성 */
    @apply text-skin-accent underline outline-0 hover:text-skin-accent/80;
  }

  /* ===== 선택 영역 (selection) 커스터마이징 예시 ===== */
  ::selection {
    @apply bg-skin-accent text-skin-inverted;
    /* text-skin-inverted은 필요하다면 변수로 정의, 혹은 간단히 #fff 등으로 지정 가능 */
  }

  /* ===== 기본 스크롤바 ===== */
  ::-webkit-scrollbar {
    @apply w-3;
  }
  ::-webkit-scrollbar-track {
    @apply bg-skin-fill;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-skin-card;
  }
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-skin-card-muted;
  }

  /* ===== 코드 블럭 & Syntax Highlight ===== */
  code,
  blockquote {
    @apply break-words;
  }
  pre > code {
    @apply whitespace-pre;
  }
  pre:has(code) {
    @apply rounded-md border border-skin-line p-4;
  }

  /* 다크 테마에서 *별도*로 색을 주고 싶을 때(하이라이팅 라이브러리 있으면 거기에 맞춰 보완 가능) */
  html[data-theme="dark"] pre:has(code),
  html[data-theme="dark"] pre:has(code) span {
    /* shiki 등 특정 라이브러리 색상 변수 사용 시 */
    color: var(--shiki-dark, #ffffff) !important;
    background-color: var(--shiki-dark-bg, #1e1e2f) !important;
  }

  html {
    @apply bg-skin-background; /* 최하위 기본 배경색 */
  }
}

@layer components {
  /* ===== 공통 컴포넌트/헬퍼 클래스 ===== */
  .focus-outline {
    @apply outline-2 outline-offset-2 outline-skin-fill focus-visible:outline-dashed;
  }
  .display-none {
    @apply hidden;
  }
}
